# تكامل نظام تسجيل الدخول مع صفحة الإعدادات

## الملخص
تم ربط نظام تسجيل الدخول من صفحة `index.html` مع صفحة `settings.html` لعرض بيانات المستخدم المسجل.

## التغييرات المنفذة

### 1. إضافة معرفات فريدة للحقول (Form Field IDs)
تم إضافة معرّفات للحقول التالية في نموذج الملف الشخصي:
- `user-first-name` - الاسم الأول
- `user-last-name` - الاسم الأخير
- `user-email` - البريد الإلكتروني
- `user-phone` - رقم الهاتف
- `user-address` - العنوان
- `user-role` - الدور (أم، معلم، مختص، إلخ)
- `user-child-count` - عدد الأطفال
- `user-language` - اللغة المفضلة

### 2. إضافة عنصر تسجيل الخروج
تم إضافة زر "تسجيل الخروج" في رأس قسم الملف الشخصي:
- الزر مخفي افتراضياً ويظهر فقط عند تسجيل الدخول
- اللون الأحمر يشير إلى الإجراء الخطير
- عند الضغط عليه، يطلب تأكيد المستخدم

### 3. إضافة دوال JavaScript

#### دالة `loadUserData()`
تعمل على:
- قراءة بيانات المستخدم من `localStorage`
  - `userEmail` - البريد الإلكتروني للمستخدم
  - `isLoggedIn` - حالة تسجيل الدخول
  - `isGuest` - حالة الزائر
  - `loginTime` - وقت تسجيل الدخول

**عند تسجيل الدخول:**
- استخراج الاسم من البريد الإلكتروني
- ملء حقل البريد الإلكتروني بالقيمة المحفوظة
- ملء حقل الاسم الأول بالاسم المستخرج
- إظهار زر تسجيل الخروج
- عرض تاريخ تسجيل الدخول

**عند الدخول كزائر:**
- عرض "زائر" بدلاً من الاسم
- إظهار حالة النمط الزائر
- إخفاء زر تسجيل الخروج

#### دالة `logoutUser()`
تعمل على:
- طلب تأكيد من المستخدم
- حذف البيانات من `localStorage`:
  - `userEmail`
  - `isLoggedIn`
  - `loginTime`
  - `hasVisited`
- عرض إشعار نجاح
- إعادة التوجيه إلى الصفحة الرئيسية (`index.html`)

## كيفية الاستخدام

### 1. تسجيل الدخول الأول
1. افتح `index.html`
2. سيظهر نافذة تسجيل دخول على الزيارة الأولى
3. أدخل بريدك الإلكتروني وكلمة المرور
4. انقر على "دخول"

### 2. زيارة صفحة الإعدادات
1. انقر على "الإعدادات" في القائمة
2. ستظهر بيانات المستخدم المسجل تلقائياً:
   - الاسم مستخرج من البريد الإلكتروني
   - البريد الإلكتروني المدخل
   - تاريخ تسجيل الدخول
3. سيكون زر "تسجيل الخروج" مرئياً

### 3. تسجيل الخروج
1. انقر على زر "تسجيل الخروج"
2. ستظهر رسالة تأكيد
3. سيتم حذف البيانات من المتصفح
4. سيتم التوجيه إلى الصفحة الرئيسية

## البيانات المحفوظة

البيانات المحفوظة في `localStorage`:
```javascript
{
  userEmail: "user@example.com",
  isLoggedIn: "true",
  loginTime: "2025-01-20T10:30:00Z",
  hasVisited: "true"
}
```

عند الدخول كزائر:
```javascript
{
  isGuest: "true",
  hasVisited: "true"
}
```

## الميزات المدمجة

✅ **تسجيل دخول اختياري** - يمكن الدخول كزائر أو بحساب
✅ **عرض بيانات المستخدم** - تظهر البيانات تلقائياً في الإعدادات
✅ **استخراج الاسم من البريد** - يتم استخراج الاسم من البريد الإلكتروني
✅ **تسجيل الخروج** - حذف آمن للبيانات
✅ **واجهة سهلة الاستخدام** - ترجمة عربية كاملة
✅ **تنبيهات تفاعلية** - رسائل تأكيد لجميع الإجراءات

## ملاحظات مهمة

1. **التخزين المحلي فقط**: البيانات محفوظة في `localStorage` المتصفح فقط وليست محفوظة على الخادم
2. **الجلسات**: سيتم حذف البيانات عند مسح بيانات المتصفح أو استخدام نافذة خاصة
3. **الأمان**: هذا نظام أساسي وينبغي إضافة تشفير وتحقق من الخادم في الإنتاج

## التخطيط المستقبلي

يمكن تحسين النظام بـ:
- إضافة حقل الاسم الكامل في نموذج تسجيل الدخول
- حفظ البيانات الإضافية (الصورة الشخصية، الهاتف، الجنس، إلخ)
- إضافة خاصية تذكري المستخدم
- تشفير البيانات المحفوظة
- نقل البيانات إلى قاعدة البيانات
