# نافذة اختيار الدور للجوال

## الملخص
تم إضافة نافذة منفصلة (Modal) تظهر في الأجهزة الجوالة (الشاشات الأصغر من 768px) عند اختيار أحد الأدوار (أم، معلم، مختص، مؤسسة، باحث).

## الميزات الجديدة

### 1. نافذة اختيار الدور المنفصلة
- **التصميم**: نافذة حديثة مع تأثيرات الانزلاق والظل
- **الوظائف**:
  - عرض جميع الأدوار (5 أدوار) بشكل واضح
  - اختيار دور واحد مع إظهار بصري للاختيار
  - زر "المتابعة" يظهر بعد الاختيار
  - زر "إلغاء" للعودة

### 2. سلوك مختلف حسب حجم الشاشة

**على الجوال (≤ 768px):**
1. المستخدم ينقر على أي بطاقة دور
2. تظهر نافذة منفصلة بنفس الدور المختار
3. النافذة توضح الدور المختار بلون مميز (أزرق)
4. زر "المتابعة" يظهر بعد الاختيار
5. المستخدم ينقر على "المتابعة" لتأكيد الاختيار
6. تُغلق النافذة ويظهر لوحة التحكم

**على سطح المكتب (> 768px):**
- السلوك الأصلي: الانتقال الفوري إلى لوحة التحكم بدون نافذة منفصلة

## المكونات المضافة

### HTML Elements
```html
<div id="role-selection-modal" class="role-selection-modal">
    <!-- رأس النافذة مع زر الإغلاق -->
    <div class="role-modal-header">
        <h3>اختر دورك</h3>
        <button class="role-modal-close" onclick="closeRoleModal()">✕</button>
    </div>
    
    <!-- قائمة الأدوار -->
    <div class="role-modal-content">
        <div class="role-selection-item" onclick="selectRoleAndContinue('mother')">
            <!-- محتوى كل دور -->
        </div>
        <!-- الأدوار الأخرى... -->
    </div>
    
    <!-- أزرار المتابعة والإلغاء -->
    <div class="role-modal-buttons">
        <button class="role-modal-button continue" onclick="continueWithRole()">
            المتابعة
        </button>
        <button class="role-modal-button cancel" onclick="closeRoleModal()">
            إلغاء
        </button>
    </div>
</div>
```

### CSS Classes

#### المظهر العام
- `.role-selection-modal` - حاوية النافذة الرئيسية
- `.role-selection-modal.active` - النافذة عندما تكون مرئية
- `.role-modal-container` - الحاوية الداخلية

#### رأس النافذة
- `.role-modal-header` - منطقة العنوان
- `.role-modal-header h3` - نص العنوان
- `.role-modal-close` - زر الإغلاق

#### محتوى الأدوار
- `.role-modal-content` - قائمة الأدوار
- `.role-selection-item` - بطاقة الدور الواحد
- `.role-selection-item:active` - حالة الاختيار
- `.role-selection-item-icon` - أيقونة الدور
- `.role-selection-item-title` - عنوان الدور
- `.role-selection-item-description` - وصف الدور

#### الأزرار
- `.role-modal-buttons` - حاوية الأزرار
- `.role-modal-button` - الزر العام
- `.role-modal-button.continue` - زر المتابعة (أزرق)
- `.role-modal-button.cancel` - زر الإلغاء (رمادي)

### JavaScript Functions

#### `showRoleModal(role)`
إظهار النافذة المنفصلة للدور المحدد
```javascript
// المعاملات:
// role: اسم الدور (mother, teacher, specialist, institution, researcher)

// الوظائف:
// - إظهار النافذة
// - تحديد الدور المختار بصرياً
// - إظهار زر المتابعة
```

#### `closeRoleModal()`
إغلاق النافذة المنفصلة
```javascript
// الوظائف:
// - إخفاء النافذة
// - إعادة تعيين الدور المختار
```

#### `selectRoleAndContinue(role)`
اختيار دور وتحديثه
```javascript
// المعاملات:
// role: اسم الدور الجديد

// الوظائف:
// - تحديث الدور المختار
// - إظهار تأثير بصري على الدور المختار
// - إظهار زر المتابعة
```

#### `continueWithRole()`
تأكيد الاختيار والانتقال إلى لوحة التحكم
```javascript
// الوظائف:
// - إغلاق النافذة
// - إخفاء قسم اختيار الأدوار
// - عرض لوحة التحكم المناسبة
```

#### `hideRoleSection()`
إخفاء قسم اختيار الأدوار بتأثير انزلاق
```javascript
// الوظائف:
// - تطبيق تأثير الانزلاق والشفافية
// - إخفاء القسم بعد انتهاء التأثير
```

## المتغيرات العالمية

```javascript
// متغير لتخزين الدور المختار في النافذة
let selectedRoleForModal = null;
```

## تدفق العمل

```
المستخدم ينقر على بطاقة دور
    ↓
selectRole(role) يُستدعى
    ↓
التحقق: هل الشاشة جوال؟
    ↓ نعم (≤768px)          ↓ لا (>768px)
    ↓                        ↓
showRoleModal(role)    hideRoleSection()
    ↓                        ↓
عرض النافذة          showDashboard(role)
    ↓
المستخدم يختار من النافذة
    ↓
selectRoleAndContinue(role)
    ↓
المستخدم ينقر "المتابعة"
    ↓
continueWithRole()
    ↓
closeRoleModal()
    ↓
hideRoleSection()
    ↓
showDashboard(selectedRoleForModal)
```

## التصميم المسؤول

### الشاشات الكبيرة (> 768px)
- النافذة **مخفية تماماً**
- السلوك الأصلي يتم استخدامه
- لا توجد نقرات إضافية

### الشاشات المتوسطة (481px - 768px)
- النافذة مرئية وقابلة للاستخدام
- تغطي معظم الشاشة مع بدايات
- أزرار كبيرة (48px على الأقل)

### الشاشات الصغيرة (< 480px)
- النافذة تغطي 90% من عرض الشاشة
- محاذاة أفقية للأزرار
- نص ملخص لكل دور

## الألوان والأيقونات

### الأدوار:

| الدور | الأيقونة | اللون الأساسي | الوصف |
|------|---------|------------|--------|
| أم | User + Heart | Cyan (#00AEEF) | تتبع تقدم الأطفال |
| معلم | Book | Orange (#F39200) | تقييمات الطلاب |
| مختص | Lightbulb | Green (#8BC643) | إدارة الحالات |
| مؤسسة | Building | Blue (#1E3A8A) | إدارة الفريق |
| باحث | Charts | Cyan (#00AEEF) | تحليل البيانات |

## التفاعل والرد

### حالات النقر:
- **على بطاقة دور**: إظهار تأثير `scale(0.98)` مع لون حدود أزرق
- **على الأزرار**: تأثير `scale(0.95)` مع ظل ملون
- **على خلفية النافذة**: لا شيء (لا يمكن النقر خارج النافذة)

### التأثيرات:
- **الانزلاق**: عند إظهار النافذة (`slideUpModal`)
- **الشفافية**: تغيير سلس من `opacity: 0` إلى `opacity: 1`
- **التغيير اللوني**: تحديث لون الحد والخلفية عند الاختيار

## الاختبار

### على الجوال:
1. افتح الموقع على هاتفك أو محاكي جوال
2. انقر على أي بطاقة دور
3. يجب أن تظهر نافذة منفصلة
4. انقر على دور آخر لتغيير الاختيار
5. انقر "المتابعة" لتأكيد
6. يجب أن تظهر لوحة التحكم

### على سطح المكتب:
1. افتح الموقع على جهاز كمبيوتر
2. انقر على أي بطاقة دور
3. يجب أن تختفي بطاقات الأدوار مباشرة وتظهر لوحة التحكم
4. لا تظهر أي نافذة منفصلة

## التوافقية

✅ جميع المتصفحات الحديثة
✅ iOS و Android
✅ الأجهزة اللوحية
✅ سطح المكتب
✅ الشاشات الصغيرة والكبيرة

## الأداء

- لا توجد رسوم بيانية ثقيلة
- تأثيرات CSS بسيطة
- استدعاءات JavaScript قليلة
- وقت الاستجابة < 100ms

## التحسينات المستقبلية

- [ ] حفظ الدور المختار في localStorage
- [ ] سهولة الوصول: تحسينات ARIA
- [ ] دعم لوحة المفاتيح (Tab, Enter, Esc)
- [ ] رسوم بيانية توضيحية لكل دور
- [ ] فيديو تعليمي لكل دور
